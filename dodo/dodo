#!/usr/bin/python3
"""Entrypoint for dodo"""

import sys

from dodo.color_printer import ColorPrinter
from dodo.dodo_runner import Dodo


def main(test_dir):
    """Main function
       It's a wrapper function over Dodo class which actually executes tests
       and returns results.
    """

    dodo = Dodo(test_dir)
    dodo.execute_tests()
    function_results = dodo.get_result()

    print("RESULTS")
    print("=" * 50)

    # Print results
    for module_name, result in function_results.items():
        if result:
            ColorPrinter.print_green(
                "{0} - {1}".format(module_name, Dodo.RESULT_CONSTANTS[result]))
        else:
            ColorPrinter.print_red(
                "{0} - {1}".format(module_name, Dodo.RESULT_CONSTANTS[result]))


if __name__ == "__main__":
    try:
        if len(sys.argv) < 2:
            Dodo.print_usage()
            sys.exit(128)

        main(sys.argv[1])
    except Exception as exception:
        print(exception)
